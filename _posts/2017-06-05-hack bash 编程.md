---
layout: post
title: Hack Bash 编程 学习笔记
tags:
- Bash
- Linux
- 编程
categories: 学习
---
又一个从入门到放弃的学习笔记。

又找到一本书，叫做《Bash中文文档》，体会到了读文档的重要性。这段时间一直都在看根技术编程有关的书籍，因为希望以后的工作能够更加的顺畅，更多的受益于这些自动化的手段，让自己从简单的重复劳动中解脱出来。






* content
{:toc}
### 第一章 总体介绍
1，什么是bash

bash就是一个操作操作系统的shell，命令解释器，现在在linux和mac中广泛应用。

2，什么是shell

shell就是一个能执行各种命令的宏处理器。

### 第二章 术语定义

基本上就是，各种定义，比如posix，空白符，控制运算符等的定义。

### 第三章 shell的基本功能

#### shell的语法

shell在读取输入的时候，要经过一系列的操作，如果在输入中开始了一个注释，shell会把注释符号#以及后面的一整行都忽略掉。概括的说，shell会读取输入并将之分解为一个个单词和运算符，并使用引用规则来决定每个单词和字符的不同的含义。然后shell会把这些解析为命令和其他结构去除一些特定单词的特殊含义，对另外一些进行扩展，根据需要进行重定向，执行指定的命令，等待其退出状态，并让这个状态能用于后续的检查和处理。

1. 引用，引用在shell中用来除去某些特殊的字符或者单词，它可以用来禁止对特殊字符的特殊处理，使得保留字不再被认为是保留字，或者禁止参数扩展。bash有三种引用机制
- 转义字符
- 单引用
- 双引用
2. 转义字符,在bash中，没有转义的反斜杠 \ 是转义字符，他能保留其下一个字符的的字面含义，除非这个字符是换行符。如果出现 \ 符号后后面直接跟着新的一行，也就是说，这个符号是一行的最后一个字符，后面没有紧接着的字符，而这个反斜杠也没有被别的引用，那么就表示，这个符号的前面的行和这个符号后面的那行其实是在一行的，连续的。在流输入的时候，这里换行这件事情，会被忽略掉。
3. 单引用,把字符用单引号引用，能够保留银行内部各个字符的字面含义。但是，在这对单引号内部就不能够再使用别的单引号了，就算已经被转义（被反斜杠转义）过的单引号也不行。
4. 双引用,把字符串用双引号 “ 引用，能够保留引号内部的各个字符的字面含义，这点和单引用类似。
- 但是像$ ‘ \\ ! 这四个符号不行，他们不能保留字面含义。在双引号中，$和’继续保留它的特殊的功能；
- 反斜杠只有在后面的字符是$ ‘ \\ ! 或者换行符的时候，才保留它的特殊的含义，在双引号中，如果反斜杠后面是这些字符中的任意一个，那么这个反斜杠就会被删除。
- 而反斜杠后面的字符如果没有特殊的含义，那么它将被保留。
- 在双引号中，可以出现另一个双引号，只要它在反斜杠后面（也就是说被转义了）。
- 如果打开了历史扩展，！将导致历史扩展，除非它被反斜杠转义，在！前面的反斜杠不会被删除。

> 在很多命令中，都需要指定单个字符，这时候应该使用ansi标准c引用，双引号转义就不行。比如：
> 
> tr $’\n’ ‘ ‘ file
> 
> 把一个叫做file的文件里面所有的行，用空格连接起来。

- 这里面的\n,表示新的一行，前面加上$,表示使用这个变量，加上‘’表示对这个变量进行引用。
- 类似的符号还有这么多：

> \a	警告-响铃
> > \b	退格删除
> > \e	转义字符-不属于ansi c
> > \f	走纸换页
> > \n	新行
> > \r	换行
> > \t	水平-制表符
> > \v	垂直-制表符
> 
> \’	单引号
> 
> \\	反斜杠
> > \nn	由八进制数nnn代表的一个八位字符
> > \xHH	由16进制数HH代表的一个八位字符
> > \cx	一个控制字符 CTROL_X

#### shell的命令

一个简单的shell 命令例如通过 echo a b c,包含该命令本身，其后还有一些参数，他们都用空格隔开。

复杂一些的命令由简单的命令通过各种方式组合而成，通过管道命令，这时一个命令的输出成为另一个命令的输入，或者通过循环或条件的命令，或者通过其他的组合方式。

1. 简单的命令使用最频繁，他仅仅包括空白分隔的多个单词，其结尾是一个shell控制运算符，其中第一个单词通过指定要执行的命令，而后面的单词都是这个命令的参数。
2. 管道，管道是有控制字符，\|或者\|& 分隔开的一系列的简单指令。

> time -p command1 [\|或者\|&] command2

管道里的每个命令的输出都经由管道与下一个命令的输入相连接，也就是说每个命令都去读取上一个命令的输出。这种连接早在命令中指定的任何重定向之前就已经进行了。

如果使用了\|&这种管道，command1的标准错误输出将会和command2的标准输出相连接，这是command2>&command1 \|的简写形式，这种对标准错误输出的隐藏重定向是在命令中指定任何的重定向之后进行的。

这里面的time指令会在管道执行完毕后输出其执行的时间的统计信息。
3. 命令的队列，命令的队列是由一个或者管道通过运算符; & && \|\| 连接而成，最后还可以由; &或者换行符结束。
- 在这些队列运算中，&& 和\|\|具有相同的优先级，其次是&和；，这两个也具有同样的优先级。
- 在命令队列中可以使用一个或者多个换行符分隔命令，这与分号是等价的。
- 如果一个命令是由控制字符&结束，则shell会不同步在子shell中执行该命令，我们通常称之为后台。这时shell并不等待命令的结束，而是返回状态0（即逻辑真）。如果我们没有启动作业控制，并且也没有显示指定重定向，那么则在一步执行的命令的标准输入将被重定向到/dev/mull。也就是啥也没有了。
- 由；分隔的命令，将会相继执行。shell依次等待每个命令的结束，整个返回状态是最后一个要执行的命令的返回状态。
- “与”或者“和”命令队列是分别由\|\|和&&分隔的一个或者多个管道。

- 命令1 && 命令2
- 仅当第一个命令返回值为0的时候，才执行第二个命令

- 命令2 \|\| 命令2
- 仅当第一个命令返回非0值的时候，才执行第二个命令
- “与”或者“和”命令队列返回的值是最后一个被执行的命令的值。

4. 复合命令

复合命令是shell 编程的结构体，每个结构体都是以保留字或者控制运算符开头，然后以与之对应的保留字或者控制运算符号结束，任何复合命令相关的重定向，都做用于改复合命令里面的所有命令除非显示覆盖。
bash提供：
- 循环结构

> until  循环结构
> 
> until 测试命令；do 命令块；done
> 
> 只要测试命令返回非零，就执行模块，返回值是命令块中执行后的对应的返回值，如果命令块没有被执行，那么返回零。
> 命令块是指一条或者几条命令的罗列或者组合。
> 0表示真值，也就是说测试命令通过。

> while 循环结构
> 
> while 测试命令；do 命令块；done
> 
> 只要测试命令返回零，就执行模块，返回值是命令块中执行后的对应的返回值，如果命令块没有被执行，那么返回零。
> 

- 条件结构
- 命令分组并整体执行



#### shell的函数
#### shell的参数
#### shell的扩展
#### 重定向
#### 命令的执行
#### shell的脚本

### 第四章 shell的内部命令

#### bsh(bash的前身)的内部命令
#### bash的内部命令
#### 改变shell的行为
#### 特殊的内部命令

### 第五章 shell的变量

#### bsh(bash的前身)的变量
#### bash的变量

### 第六章 bash的功能

#### bash的启动
#### bash的启动脚本
#### 交互式的shell
#### bash的条件表达式
#### shell的算数运算
#### 别名
#### 数组
#### 目录栈
#### 提示符的控制
#### 受限制的bash
#### bash的posix模式

### 第七章 作业控制

#### 作业控制的基础
#### 作业控制的内部命令
#### 作业控制的变量

### 第八章 编辑命令行

#### 行编辑介绍
#### 与readline的交互
#### readline的启动脚本
#### 可以绑定的readline命令
#### 可编程的补全
#### 可编程的补全内部命令

### 第九章 历史的交互使用

#### bash的历史功能
#### bash的历史内部命令
#### 历史扩展

### 第十章 bash的安装

#### 基本安装
#### 安装路径
#### 选择系统类型
#### 抹人设置的共享
#### 控制配置的脚本
#### 配置选项




### 附录 贴图

在最后贴几张图，这些图用来以后用到的时候能够快速查找。

![](http://i1.piimg.com/593397/c2024966e78b43f8.png)

![](http://i1.piimg.com/593397/93253d896bfe56ab.jpg)

![](http://i1.piimg.com/593397/c100d4a613392561.jpg)

![](http://i1.piimg.com/593397/e279be21c7c06531.jpg)

![](http://i1.piimg.com/593397/5a465ea6616a334b.jpg)

![](http://i1.piimg.com/593397/6848a9fc268c3469.jpg)


